(function(e){function q(a,b){if(a&&a._slider&&a._slider.length&&a._sliderChildren&&a._sliderChildren.length&&b){var d=a._slider,c=a._sliderChildren,f=a._thumbsContainer,l=!1,h=!1,n=!1,i=!1,k=!1;f&&0<f.length&&(f.addClass("slip-gallery-thumbs-container"),f.wrapInner('<div class="slip-gallery-thumbs-wrap"></div>'),l=f.find(".slip-gallery-thumbs-wrap"),0<l.length&&(h=l.find(b.thumbsChildSelector),0<h.length&&(h.addClass("slip-gallery-thumbs-slide"),k=!0)));k&&(f.css({display:"block",position:"relative",overflow:"hidden"}),l.css({display:"block",position:"absolute",top:"0px",left:"0px",width:"9999px"}),h.css({"float":"left",cursor:"pointer",display:"block"}),h.eq(0).addClass("slip-gallery-thumbs-slide-active"));if(!1==k||c.length==h.length){d.css({position:"relative",display:"block"}).addClass("slip-gallery");var m=!1;c.each(function(a){var b=e(this);b.css({position:"absolute",left:"0px",top:"0px",width:"100%",height:"100%"});0==a?(m=b,b.css({"z-index":"2"}).addClass("slip-gallery-slide-active")):b.hide().css({"z-index":"1"});b.addClass("slip-gallery-slide")});c=e(e("<div />").append(e(m).eq(0).clone()).html());d.prepend(c);c.css({visibility:"hidden",display:"block",position:"static","z-index":"0",left:"",top:"",height:"auto"}).removeClass("slip-gallery-slide slip-gallery-slide-active").addClass("slip-gallery-sentinel");b.prevSelector&&(n=e(b.prevSelector),n.css({cursor:"pointer"}));b.nextSelector&&(i=e(b.nextSelector),i.css({cursor:"pointer"}));a._thumbsWrap=l;a._thumbsChildren=h;a._sentinelSlide=c;a._prevBtn=n;a._nextBtn=i;u(a,b);r(a,b);v(a,b);var g=a,j=b,g=g||{},j=j||{};g._thumbsChildren&&g._thumbsChildren.each(function(a){e(this).click(function(b){b.preventDefault();g.newSlideIndex=a;s(g,j)})});g._prevBtn&&g._prevBtn.click(function(a){a.preventDefault();var a=g,b=j,a=a||{},b=b||{};if(a._sliderChildren){var c=t(a,b),d=c-1;0>d&&(d=a._sliderChildren.length-1);a.curSlideIndex=c;a.newSlideIndex=d;s(a,b)}});g._nextBtn&&g._nextBtn.click(function(a){a.preventDefault();w(g,j)});g.resizeCheck=!1;e(window).resize(function(){!1==g.resizeCheck&&(g.resizeCheck=!0,setTimeout(function(){r(g,j);u(g,j);r(g,j);var a=g,b=j;a._sliderChildren&&(a._sliderChildren.stop(!0,!0).removeClass("slip-gallery-slide-active").hide().css("z-index","1"),a._sliderChildren.eq(0).stop(!0,!0).addClass("slip-gallery-slide-active").show().css("z-index","2"),a._thumbsContainer&&(a._thumbsWrap&&a._thumbsChildren)&&(a._thumbsWrap.stop(!0,!0).css("left","0px"),a._thumbsChildren.removeClass("slip-gallery-thumbs-slide-active"),a._thumbsChildren.eq(0).addClass("slip-gallery-thumbs-slide-active")));x(a,b);g.resizeCheck=!1},100))});d=a||{};l=b||{};y(d,l)}}}function z(a,b){if(b&&a&&0<a.length){for(var d in p)if(p.hasOwnProperty(d)){var c;c=a.attr("data-"+d);if("undefined"===typeof c||!1===c||""===c)c="";c&&(b[d]=c)}a.each(function(){var a={_slider:e(this),_sliderChildren:!1,_thumbsContainer:!1,_thumbsWrap:!1,_thumbsChildren:!1,_load_thumbsChildren:!1,_sentinelSlide:!1,_prevBtn:!1,_nextBtn:!1,newSlideIndex:!1,curSlideIndex:!1,timer:!1},c=!1,d=!1,n=!1;b.mainChildSelector&&(c=a._slider.find(b.mainChildSelector),0<c.length&&(b.thumbsContainerSelector&&b.thumbsChildSelector)&&(d=e(b.thumbsContainerSelector),d.length&&(n=d.find(b.thumbsChildSelector))));a._sliderChildren=c;a._thumbsContainer=d;a._load_thumbsChildren=n;if(a._slider&&a._slider.length&&a._sliderChildren&&a._sliderChildren.length){var i=a._sliderChildren.find("img");a._load_thumbsChildren&&a._load_thumbsChildren.length&&i.add(a._load_thumbsChildren.find("img"));var k=!1,m=0;i.length?i.each(function(){if(!k){var c=e(this),d=new Image;d.src=c.attr("src");setTimeout(function(){d.complete?(m++,m==i.length&&(q(a,b),k=!0)):d.onload=function(){m++;m==i.length&&(q(a,b),k=!0)}},1)}}):(q(a,b),k=!0)}})}}function A(a){a=a||!1;return"string"==typeof a&&a.match(/^[0-9]+x[0-9]+$/)?(a=a.split("x",2),{width:parseFloat(a[0]),height:parseFloat(a[1])}):!1}function r(a,b){var d=A(b.mainRatio);d&&a._slider.height(a._slider.width()*(d.height/d.width));d=a._thumbsChildren.eq(0);a._thumbsWrap.css({"min-height":d.outerHeight(!1),"min-width":d.outerWidth(!1),position:"static"});a._thumbsContainer.css({width:"",height:""});a._thumbsContainer.width(a._thumbsContainer.width());a._thumbsContainer.height(a._thumbsContainer.height());a._thumbsWrap.css("position","absolute")}function u(a,b){if(a._thumbsChildren&&1<=b.thumbsShown){var d="vertical"==a.thumbsOrientation?"Height":"Width",c={thumbsContainerWidth:0<b.thumbsContainerWidth?b.thumbsContainerWidth:a._thumbsContainer.width(),thumbsContainerHeight:0<b.thumbsContainerHeight?b.thumbsContainerHeight:a._thumbsContainer.height(),thumbsWidth:0,thumbsHeight:0,thumbsSpace:0},f=A(b.thumbsRatio);if("string"==typeof b.thumbsSpace||b.thumbsSpace instanceof String)b.thumbsSpace.match(/^[0-9]{1,3}(\.[0-9]+)?%$/)?c.thumbsSpace=c["thumbsContainer"+d]*(parseFloat(b.thumbsSpace)/100):b.thumbsSpace.match(/^[0-9]+(\.[0-9]+)?px$/)&&(c.thumbsSpace=parseFloat(b.thumbsSpace));else if(("number"==typeof b.thumbsSpace||b.thumbsSpace instanceof Number)&&0<b.thumbsSpace)c.thumbsSpace=b.thumbsSpace;else if("string"==typeof b["thumbs"+d]||b["thumbs"+d]instanceof String)b["thumbs"+d].match(/^[0-9]{1,3}(\.[0-9]+)?%$/)?c["thumbs"+d]=c["thumbsContainer"+d]*(parseFloat(b["thumbs"+d])/100):b["thumbs"+d].match(/^[0-9]+(\.[0-9]+)?px$/)&&(c["thumbs"+d]=parseFloat(b["thumbs"+d]));else if(("number"==typeof b["thumbs"+d]||b["thumbs"+d]instanceof Number)&&0<b["thumbs"+d])c["thumbs"+d]=b["thumbs"+d];1<b.thumbsShown&&(0<c.thumbsSpace?c["thumbs"+d]=(c["thumbsContainer"+d]-c.thumbsSpace*(b.thumbsShown-1))/b.thumbsShown:0<c["thumbs"+d]&&(c.thumbsSpace=(c["thumbsContainer"+d]-c["thumbs"+d]*b.thumbsShown)/(b.thumbsShown-1)));0==c["thumbs"+d]&&(c["thumbs"+d]=c["thumbsContainer"+d]/b.thumbsShown);"vertical"==a.thumbsOrientation?a._thumbsChildren.each(function(){var a=e(this),b=a.outerHeight(!1)-a.height();a.height(c.thumbsHeight-b).css("margin-bottom",c.thumbsSpace+"px")}):a._thumbsChildren.each(function(){var a=e(this),b=a.outerWidth(!1)-a.width();a.width(c.thumbsWidth-b).css("margin-right",c.thumbsSpace+"px");f&&a.height((c.thumbsWidth-b)*(f.height/f.width))})}}function t(a){var a=a||{},b=0;a._sliderChildren&&a._sliderChildren.each(function(a){e(this).hasClass("slip-gallery-slide-active")&&(b=a)});return b}function v(a,b){a=a||{};b=b||{};if(0<=a.newSlideIndex&&0<=a.curSlideIndex&&a._thumbsContainer&&a._thumbsWrap&&a._thumbsChildren){a._thumbsChildren.eq(a.curSlideIndex).removeClass("slip-gallery-thumbs-slide-active");a._thumbsChildren.eq(a.newSlideIndex).addClass("slip-gallery-thumbs-slide-active");var d=a._thumbsContainer.width(),c=1<=b.thumbsShown?b.thumbsShown:Math.ceil(d/thumbsChildrenWidth);if(a._thumbsChildren.length>c&&0<a._thumbsChildren.length-c){var f=a._thumbsChildren.eq(a.newSlideIndex),e=a._thumbsChildren.eq(a._thumbsChildren.length-1),h=Math.abs(a._thumbsWrap.position().left),f=f.position().left-(d/2-f.outerWidth(!1)/2),d=e.position().left+e.outerWidth(!1)-d,e=a._thumbsChildren.length-c;0<=e&&(e=a._thumbsChildren.eq(e).position().left,d>e-1&&d<e+1&&(d=e));c=a.newSlideIndex-Math.floor(c/2);0<=c&&(c=a._thumbsChildren.eq(c).position().left,f>c-1&&f<c+1&&(f=c));1>f&&(f=0);f>d-1&&(f=d);c="";h!=f&&(c=-1*f+"px");c&&a._thumbsWrap.stop(!0,!1).animate({left:c},500)}}}function s(a,b){a=a||{};b=b||{};a.curSlideIndex=t(a,b);if(0<=a.newSlideIndex&&0<=a.curSlideIndex&&a._sliderChildren){if(a.newSlideIndex>=a._sliderChildren.length||0>a.newSlideIndex||a.newSlideIndex==a.curSlideIndex)return;var d=a._sliderChildren.eq(a.newSlideIndex),c=a._sliderChildren.eq(a.curSlideIndex);d.css({"z-index":"2"}).stop(!0,!0);c.css({"z-index":"1"}).stop(!0,!0);b.fade?(c.show(),d.hide().fadeIn(400,function(){c.hide()})):(d.show(),c.hide());d.addClass("slip-gallery-slide-active");c.removeClass("slip-gallery-slide-active");a._thumbsContainer&&(a._thumbsChildren&&a._thumbsWrap)&&v(a,b)}a.newSlideIndex=!1;a.curSlideIndex=!1;x(a,b)}function w(a,b){a=a||{};b=b||{};if(a._sliderChildren){var d=t(a,b),c=d+1;c>=a._sliderChildren.length&&(c=0);a.curSlideIndex=d;a.newSlideIndex=c;s(a,b)}}function y(a,b){a=a||{};b=b||{};b.autoLoop&&(a.timer=setTimeout(function(){w(a,b)},b.delay))}function x(a,b){a=a||{};b=b||{};b.autoLoop&&(a.timer&&clearTimeout(a.timer),y(a,b))}var p={mainChildSelector:">*",thumbsContainerSelector:"",thumbsContainerWidth:"auto",thumbsContainerHeight:"auto",thumbsChildSelector:">*",thumbsWidth:"auto",thumbsHeight:"auto",thumbsSpace:0,thumbsShown:5,thumbsOrientation:"horizontal",mainRatio:"auto",thumbsRatio:"auto",prevSelector:"",nextSelector:"",fade:!1,autoLoop:!0,delay:3E3};e.fn.SlipGallery=function(a){a=e.extend({},p,a);z(this,a)};var B=e(".slip-gallery"),C=e.extend({},p);z(B,C)})(jQuery);