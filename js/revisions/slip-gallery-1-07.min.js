(function(f){function p(a,b){var c=a.attr(b);if("undefined"===typeof c||!1===c||""===c)c="";return c}function s(a,b){if(a._sliderContainer&&a._sliderContainer.length){var c=a._sliderContainer,d=c.find(b.mainChildSelector),e=a._thumbsContainer,k=!1,h=!1,l=!1,i=!1,m=!1;c.addClass("slip-gallery-container");if(0<d.length&&(e&&0<e.length&&(e.addClass("slip-gallery-thumbs-container"),e.wrapInner('<div class="slip-gallery-thumbs-wrap"></div>'),k=e.find(".slip-gallery-thumbs-wrap"),0<k.length&&(h=k.find(b.thumbsChildSelector),0<h.length&&(h.addClass("slip-gallery-thumbs-slide"),m=!0))),m&&(e.css({display:"block",position:"relative",overflow:"hidden"}),k.css({display:"block",position:"absolute",top:"0px",left:"0px",width:"9999px"}),h.css({"float":"left",cursor:"pointer",display:"block"}),h.eq(0).addClass("slip-gallery-thumbs-slide-active")),!1==m||d.length==h.length)){c.css({position:"relative",display:"block",overflow:"hidden"});var n=!1;d.each(function(a){var b=f(this);b.css({left:"0px",top:"0px",width:"100%",height:"100%",display:"block",position:"absolute"});0==a?(n=b,b.show().css({"z-index":"2"}).addClass("slip-gallery-slide-active")):b.hide().css({"z-index":"1"});b.addClass("slip-gallery-slide")});e=f(f("<div />").append(f(n).eq(0).clone()).html());c.prepend(e);e.css({visibility:"hidden",display:"block",position:"static","z-index":"0",left:"",top:"",height:"auto"}).removeClass("slip-gallery-slide slip-gallery-slide-active").addClass("slip-gallery-sentinel");b.prevSelector&&(l=f(b.prevSelector),l.css({cursor:"pointer"}));b.nextSelector&&(i=f(b.nextSelector),i.css({cursor:"pointer"}));a._sliderChildren=d;a._thumbsWrap=k;a._thumbsChildren=h;a._sentinelSlide=e;a._prevBtn=l;a._nextBtn=i;q(a,b);w(a,b);x(a,b);q(a,b);y(a,b);var g=a,j=b,g=g||{},j=j||{};g._thumbsChildren&&g._thumbsChildren.each(function(a){f(this).click(function(b){b.preventDefault();g.newSlideIndex=a;t(g,j)})});g._prevBtn&&g._prevBtn.click(function(a){a.preventDefault();var a=g,b=j,a=a||{},b=b||{};if(a._sliderChildren){var c=u(a,b),d=c-1;0>d&&(d=a._sliderChildren.length-1);a.curSlideIndex=c;a.newSlideIndex=d;t(a,b)}});g._nextBtn&&g._nextBtn.click(function(a){a.preventDefault();z(g,j)});g.resizeCheck=!1;f(window).resize(function(){!1==g.resizeCheck&&(g.resizeCheck=!0,setTimeout(function(){q(g,j);w(g,j);x(g,j);q(g,j);var a=g,b=j;a._sliderChildren&&(a._sliderChildren.stop(!0,!0).removeClass("slip-gallery-slide-active").css("z-index","1"),a._sliderChildren.eq(0).stop(!0,!0).addClass("slip-gallery-slide-active").css("z-index","2"),a._sliderChildren.hide(),a._sliderChildren.eq(0).show(),a._thumbsContainer&&(a._thumbsWrap&&a._thumbsChildren)&&(a._thumbsWrap.stop(!0,!0).css("left","0px"),a._thumbsChildren.removeClass("slip-gallery-thumbs-slide-active"),a._thumbsChildren.eq(0).addClass("slip-gallery-thumbs-slide-active")));A(a,b);g.resizeCheck=!1},100))});c=a||{};d=b||{};B(c,d);if("function"===typeof b.onReady)b.onReady()}}}function C(a,b){if(b&&a&&0<a.length){for(var c in r)if(r.hasOwnProperty(c)){var d=p(a,"data-"+c);d&&(b[c]=d)}a.each(function(){var a={_sliderContainer:f(this),_sliderChildren:!1,_load_sliderChildren:!1,_thumbsContainer:!1,_thumbsWrap:!1,_thumbsChildren:!1,_load_thumbsChildren:!1,_sentinelSlide:!1,_prevBtn:!1,_nextBtn:!1,newSlideIndex:!1,curSlideIndex:!1,timer:!1},c=!1,d=!1,l=!1;b.mainChildSelector&&(c=a._sliderContainer.find(b.mainChildSelector),0<c.length&&(b.thumbsContainerSelector&&b.thumbsChildSelector)&&(d=f(b.thumbsContainerSelector),d.length&&(l=d.find(b.thumbsChildSelector),l.length!=c.length&&(l=d=!1))));a._load_sliderChildren=c;a._thumbsContainer=d;a._load_thumbsChildren=l;if(a._load_sliderChildren&&a._load_sliderChildren.length&&(!0===b.preload||0<b.preload)){c=a._load_sliderChildren;d=a._load_thumbsChildren;!0!==b.preload&&0<b.preload&&c.slice(0,b.preload);var i=c.find("img");c.each(function(){var a=f(this);p(a,"src")?i.add(a):i.add(a.find("img"))});a._load_thumbsChildren&&a._load_thumbsChildren.length&&(!0!==b.preload&&0<b.preload&&d.slice(0,b.preload),d.each(function(){var a=f(this);p(a,"src")?i.add(a):i.add(a.find("img"))}));var m=!1,n=0;i.length?i.each(function(){if(!m){var c=f(this),d=new Image;if(c=p(c,"src"))d.src=c,setTimeout(function(){d.complete?(n++,n==i.length&&(s(a,b),m=!0)):d.onload=function(){n++;n==i.length&&(s(a,b),m=!0)}},1)}}):(s(a,b),m=!0)}})}}function v(a){a=a||!1;return"string"==typeof a&&a.match(/^[0-9]+x[0-9]+$/)?(a=a.split("x",2),{width:parseFloat(a[0]),height:parseFloat(a[1])}):!1}function q(a,b){var c=v(b.mainRatio);c&&(c=a._sliderContainer.width()*(c.height/c.width),a._sliderContainer.height(c));if(a._thumbsContainer&&a._thumbsChildren){c="vertical"==a.thumbsOrientation?"vertical":"horizontal";a._thumbsContainer.css({width:"",height:""});var d=0,e=0,k=a._thumbsContainer.width(),h=a._thumbsContainer.height();"vertical"==c?a._thumbsChildren.each(function(){var a=f(this),b=a.outerWidth(!0);e+=a.outerHeight(!0);b>d&&(d=b);k=d}):a._thumbsChildren.each(function(){var a=f(this),b=a.outerHeight(!0);d+=a.outerWidth(!0);b>e&&(e=b);h=e});0<b.thumbsContainerWidth?a._thumbsContainer.width(b.thumbsContainerWidth):a._thumbsContainer.width(k);0<b.thumbsContainerHeight?a._thumbsContainer.height(b.thumbsContainerHeight):a._thumbsContainer.height(h);a._thumbsWrap.width(d+5);a._thumbsWrap.height(e+5);a._thumbsWrap.css("position","relative")}}function w(a,b){var c=v(b.mainRatio),d=a._sliderContainer.width(),e=a._sliderContainer.height();c&&(c.width/d>=c.height/e?d=a._sliderContainer.height()*(c.width/c.height):e=a._sliderContainer.width()*(c.height/c.width));a._sliderChildren.width(d);a._sliderChildren.height(e)}function x(a,b){if(a._thumbsChildren&&1<=b.thumbsShown){var c="vertical"==a.thumbsOrientation?"Height":"Width",d={thumbsContainerWidth:0<b.thumbsContainerWidth?b.thumbsContainerWidth:a._thumbsContainer.width(),thumbsContainerHeight:0<b.thumbsContainerHeight?b.thumbsContainerHeight:a._thumbsContainer.height(),thumbsWidth:0,thumbsHeight:0,thumbsSpace:0},e=v(b.thumbsRatio);if("string"==typeof b.thumbsSpace||b.thumbsSpace instanceof String)b.thumbsSpace.match(/^[0-9]{1,3}(\.[0-9]+)?%$/)?d.thumbsSpace=d["thumbsContainer"+c]*(parseFloat(b.thumbsSpace)/100):b.thumbsSpace.match(/^[0-9]+(\.[0-9]+)?px$/)&&(d.thumbsSpace=parseFloat(b.thumbsSpace));else if(("number"==typeof b.thumbsSpace||b.thumbsSpace instanceof Number)&&0<b.thumbsSpace)d.thumbsSpace=b.thumbsSpace;else if("string"==typeof b["thumbs"+c]||b["thumbs"+c]instanceof String)b["thumbs"+c].match(/^[0-9]{1,3}(\.[0-9]+)?%$/)?d["thumbs"+c]=d["thumbsContainer"+c]*(parseFloat(b["thumbs"+c])/100):b["thumbs"+c].match(/^[0-9]+(\.[0-9]+)?px$/)&&(d["thumbs"+c]=parseFloat(b["thumbs"+c]));else if(("number"==typeof b["thumbs"+c]||b["thumbs"+c]instanceof Number)&&0<b["thumbs"+c])d["thumbs"+c]=b["thumbs"+c];1<b.thumbsShown&&(0<d.thumbsSpace?d["thumbs"+c]=(d["thumbsContainer"+c]-d.thumbsSpace*(b.thumbsShown-1))/b.thumbsShown:0<d["thumbs"+c]&&(d.thumbsSpace=(d["thumbsContainer"+c]-d["thumbs"+c]*b.thumbsShown)/(b.thumbsShown-1)));0==d["thumbs"+c]&&(d["thumbs"+c]=d["thumbsContainer"+c]/b.thumbsShown);"vertical"==a.thumbsOrientation?a._thumbsChildren.each(function(){var a=f(this),b=a.outerHeight(!1)-a.height();a.height(d.thumbsHeight-b).css("margin-bottom",d.thumbsSpace+"px")}):a._thumbsChildren.each(function(){var a=f(this),b=a.outerWidth(!1)-a.width();a.width(d.thumbsWidth-b).css("margin-right",d.thumbsSpace+"px");e&&a.height((d.thumbsWidth-b)*(e.height/e.width))})}}function u(a){var a=a||{},b=0;a._sliderChildren&&a._sliderChildren.each(function(a){f(this).hasClass("slip-gallery-slide-active")&&(b=a)});return b}function y(a,b){a=a||{};b=b||{};if(0<=a.newSlideIndex&&0<=a.curSlideIndex&&a._thumbsContainer&&a._thumbsWrap&&a._thumbsChildren){a._thumbsChildren.eq(a.curSlideIndex).removeClass("slip-gallery-thumbs-slide-active");a._thumbsChildren.eq(a.newSlideIndex).addClass("slip-gallery-thumbs-slide-active");var c=a._thumbsChildren.eq(0).outerWidth(!1),d=a._thumbsContainer.width(),e=1<=b.thumbsShown?b.thumbsShown:Math.ceil(d/c);if(a._thumbsChildren.length>e&&0<a._thumbsChildren.length-e){var f=a._thumbsChildren.eq(a.newSlideIndex),h=a._thumbsChildren.eq(a._thumbsChildren.length-1),c=Math.abs(a._thumbsWrap.position().left),f=f.position().left-(d/2-f.outerWidth(!1)/2),d=h.position().left+h.outerWidth(!1)-d,h=a._thumbsChildren.length-e;0<=h&&(h=a._thumbsChildren.eq(h).position().left,d>h-1&&d<h+1&&(d=h));e=a.newSlideIndex-Math.floor(e/2);0<=e&&(e=a._thumbsChildren.eq(e).position().left,f>e-1&&f<e+1&&(f=e));1>f&&(f=0);f>d-1&&(f=d);e="";c!=f&&(e=-1*f+"px");e&&a._thumbsWrap.stop(!0,!1).animate({left:e},500)}}}function t(a,b){a=a||{};b=b||{};a.curSlideIndex=u(a,b);if(0<=a.newSlideIndex&&0<=a.curSlideIndex&&a._sliderChildren){if(a.newSlideIndex>=a._sliderChildren.length||0>a.newSlideIndex||a.newSlideIndex==a.curSlideIndex)return;var c=a._sliderChildren.eq(a.newSlideIndex),d=a._sliderChildren.eq(a.curSlideIndex);a._sliderChildren.eq(a._sliderChildren.length-1);c.css({"z-index":"2"}).stop(!0,!0);d.css({"z-index":"1"}).stop(!0,!0);switch(b.fx){case "fade":d.show().fadeOut(b.fxSpeed);c.hide().fadeIn(b.fxSpeed);break;case "hrzSlide":break;case "vrtSlide":break;default:c.show(),d.hide()}c.addClass("slip-gallery-slide-active");d.removeClass("slip-gallery-slide-active");a._thumbsContainer&&(a._thumbsChildren&&a._thumbsWrap)&&y(a,b)}a.newSlideIndex=!1;a.curSlideIndex=!1;A(a,b)}function z(a,b){a=a||{};b=b||{};if(a._sliderChildren){var c=u(a,b),d=c+1;d>=a._sliderChildren.length&&(d=0);a.curSlideIndex=c;a.newSlideIndex=d;t(a,b)}}function B(a,b){a=a||{};b=b||{};b.autoLoop&&(a.timer=setTimeout(function(){z(a,b)},b.delay))}function A(a,b){a=a||{};b=b||{};b.autoLoop&&(a.timer&&clearTimeout(a.timer),B(a,b))}var r={mainChildSelector:">*",thumbsContainerSelector:"",thumbsContainerWidth:"auto",thumbsContainerHeight:"auto",thumbsChildSelector:">*",thumbsWidth:"auto",thumbsHeight:"auto",thumbsSpace:0,thumbsShown:5,thumbsOrientation:"horizontal",mainRatio:"auto",thumbsRatio:"auto",prevSelector:"",nextSelector:"",fx:"none",fxSpeed:400,autoLoop:!0,delay:3E3,preload:!0,onReady:!1};f.fn.SlipGallery=function(a){a=f.extend({},r,a);C(this,a)};var D=f(".slip-gallery"),E=f.extend({},r);C(D,E)})(jQuery);